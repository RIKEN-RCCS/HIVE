print('load SPH and convert VectorData')

local camera = Camera()
--camera:SetScreenSize(256, 256)
camera:SetScreenSize(2048, 2048)
--camera:SetScreenSize(8192, 8192) --250[sec]
camera:SetFilename('image_sph_vector.jpg')

camera:LookAt(
	0,0,80,
	0,0,0,
	0,1,0,
	60
)

local sph = SPHLoader()
sph:Load('fvel_0000001470.sph')

local vtovec = VolumeToVector()
local voldata = sph:VolumeData()
print(vtovec)
print(voldata)
vtovec:DividePitch(4,4,4)
--vtovec:DivideNumber(50,50,50)
vtovec:Create(voldata, 1.0, 3.0)

local line = vtovec:LineData()

local model = LineModel()
model:SetLineWidth(0.1)
model:Create(line)
model:SetShader('normal.frag')

render {camera, model}



